<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Synthesis Configuration</title>
    <style>
      body {
        font-family: "Franklin Gothic Medium", "Arial Narrow", Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        background-color: whitesmoke;
      }

      .week-container {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        width: 100%;
        position: relative;
      }

      .week-tag {
        position: absolute;
        top: 15px;
        left: 0px;
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
      }

      .row-container {
        display: flex;
        align-items: center;
        width: 100%;
        justify-content: center;
        position: relative;
      }

      .tag {
        position: absolute;
        left: 100px;
        font-size: 16px;
        font-weight: bold;
      }

      .row {
        display: flex;
        justify-content: center;
        flex: 1;
      }

      .divider {
        width: 100%;
        height: 1px;
        background-color: black;
        margin: 20px 0;
      }

      .container {
        width: 200px;
        height: 200px;
        margin: 15px;
        border-radius: 10px;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        background-color: silver;
        position: relative;
      }

      .long-container {
        width: calc(4 * 200px + 3 * 30px);
      }

      .circle {
        width: 20px;
        height: 20px;
        margin: 5px;
        border-radius: 50%;
        cursor: grab;
        position: relative;
      }

      .orange-red {
        background-color: red;
      }

      .green {
        background-color: green;
      }

      .blue {
        background-color: blue;
      }

      .yellow {
        background-color: yellow;
      }

      .black-circle {
        background-color: black;
        color: white;
        font-size: 10px;
        font-weight: bold;
        text-align: center;
        line-height: 20px;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .black-circle span {
        position: absolute;
        top: -18px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 10px;
        color: black;
        white-space: nowrap;
      }

      .toggle-button {
        position: absolute;
        right: 20px;
        font-size: 14px;
        padding: 5px 10px;
        border-radius: 5px;
        background-color: lightgrey;
        cursor: pointer;
      }
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  </head>
  <body>
    <script>
      function createCustomContainer() {
        const container = document.createElement("div");
        container.className = "container long-container";

        const colors = ["orange-red", "green", "blue", "yellow"];
        const circles = [];

        for (let color of colors) {
          for (let i = 0; i < 20; i++) {
            const circle = document.createElement("div");
            circle.className = `circle ${color}`;
            circles.push(circle);
          }
        }

        const blackLabels = ["Herdimas", "HH", "Jamie", "Luiza"];
        for (let label of blackLabels) {
          const blackCircle = createBlackCircle(label);
          circles.push(blackCircle);
        }

        circles.sort(() => Math.random() - 0.5);

        circles.forEach((circle) => container.appendChild(circle));

        return container;
      }

      function createUniformContainer(numCircles, colorClass, blackLabel) {
        const container = document.createElement("div");
        container.className = "container";

        for (let i = 0; i < numCircles; i++) {
          const circle = document.createElement("div");
          circle.className = `circle ${colorClass}`;
          container.appendChild(circle);
        }

        if (blackLabel) {
          const blackCircle = createBlackCircle(blackLabel);
          container.appendChild(blackCircle);
        }

        return container;
      }

      function createMixedContainerWithOneBlackCircle(blackLabel) {
        const container = document.createElement("div");
        container.className = "container";

        const colors = ["orange-red", "green", "blue", "yellow"];
        const circles = [];

        for (let i = 0; i < 5; i++) {
          for (let color of colors) {
            const circle = document.createElement("div");
            circle.className = `circle ${color}`;
            circles.push(circle);
          }
        }

        const blackCircle = createBlackCircle(blackLabel);
        circles.push(blackCircle);

        circles.sort(() => Math.random() - 0.5);

        circles.forEach((circle) => container.appendChild(circle));

        return container;
      }

      function createEmptyContainer() {
        const container = document.createElement("div");
        container.className = "container";
        return container;
      }

      function createBlackCircle(label) {
        const blackCircle = document.createElement("div");
        blackCircle.className = "circle black-circle";
        const labelSpan = document.createElement("span");
        labelSpan.textContent = label;
        blackCircle.appendChild(labelSpan);
        return blackCircle;
      }

      function createRow(rowNumber) {
        const rowContainer = document.createElement("div");
        rowContainer.className = "row-container";

        const tag = document.createElement("div");
        tag.className = "tag";
        tag.textContent = rowNumber % 2 === 0 ? "F" : "T/W/Th";
        rowContainer.appendChild(tag);

        const row = document.createElement("div");
        row.className = `row row${String(rowNumber).padStart(2, "0")}`;

        if (rowNumber === 2) {
          const toggleButton = document.createElement("button");
          toggleButton.className = "toggle-button";
          toggleButton.textContent = "Toggle";
          toggleButton.onclick = toggleRow02;
          rowContainer.appendChild(toggleButton);

          row.appendChild(createCustomContainer());
          row.dataset.state = "long";
        } else if (rowNumber === 10) {
          row.appendChild(createCustomContainer());
        } else if (rowNumber === 7 || rowNumber === 17 || rowNumber === 18) {
          for (let i = 0; i < 4; i++) {
            row.appendChild(createEmptyContainer());
          }
        } else if ([12, 14, 16, 20, 22, 24, 26, 28, 30].includes(rowNumber)) {
          const blackLabels = ["Herdimas", "HH", "Jamie", "Luiza"];
          for (let label of blackLabels) {
            row.appendChild(createMixedContainerWithOneBlackCircle(label));
          }
        } else {
          const colors = [
            { class: "orange-red", label: "Herdimas" },
            { class: "green", label: "HH" },
            { class: "blue", label: "Jamie" },
            { class: "yellow", label: "Luiza" },
          ];

          for (let { class: colorClass, label } of colors) {
            row.appendChild(createUniformContainer(20, colorClass, label));
          }
        }

        rowContainer.appendChild(row);

        return rowContainer;
      }

      function toggleRow02() {
        const row02 = document.querySelector(".row02");
        row02.innerHTML = "";

        if (row02.dataset.state === "long") {
          const colors = [
            { class: "orange-red", label: "Herdimas" },
            { class: "green", label: "HH" },
            { class: "blue", label: "Jamie" },
            { class: "yellow", label: "Luiza" },
          ];

          for (let { class: colorClass, label } of colors) {
            row02.appendChild(createUniformContainer(20, colorClass, label));
          }
          row02.dataset.state = "four";
        } else {
          row02.appendChild(createCustomContainer());
          row02.dataset.state = "long";
        }

        $(".circle").draggable({
          start: function () {
            zCounter += 1;
            $(this).css("z-index", zCounter);
          },
        });
      }

      for (let week = 1; week <= 15; week++) {
        const weekContainer = document.createElement("div");
        weekContainer.className = "week-container";

        const weekTag = document.createElement("div");
        weekTag.className = "week-tag";
        weekTag.textContent = `Week ${String(week).padStart(2, "0")}`;
        weekContainer.appendChild(weekTag);

        const startRow = (week - 1) * 2 + 1;
        weekContainer.appendChild(createRow(startRow));
        weekContainer.appendChild(createRow(startRow + 1));

        document.body.appendChild(weekContainer);

        if (week !== 15) {
          const divider = document.createElement("div");
          divider.className = "divider";
          document.body.appendChild(divider);
        }
      }

      $(document).ready(function () {
        let zCounter = 1000;

        $(".circle").draggable({
          start: function () {
            zCounter += 1;
            $(this).css("z-index", zCounter);
          },
        });
      });
    </script>
  </body>
</html>
